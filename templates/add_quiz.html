{% extends 'base.html' %}

{% block content %}
<form method="POST" action="{{ url_for('add_quiz') }}">
    {{ form.hidden_tag() }}  <!-- Main form CSRF token -->
    <div class="form-group">
        {{ form.title.label }}
        {{ form.title(class='form-control') }}
    </div>
    <div class="form-group">
        {{ form.description.label }}
        {{ form.description(class='form-control') }}
    </div>
    <div class="form-group">
        {{ form.questions.label }}
        {% for question in form.questions %}
        <div>
            {{ question.hidden_tag() }}  <!-- CSRF token for each question -->
            {{ question.text(class='form-control') }}
            {% for choice in question.choices %}
            <div>
                {{ choice.hidden_tag() }}  <!-- CSRF token for each choice -->
                {{ choice.text(class='form-control') }}
                {{ choice.is_correct(class='form-check-input') }}
                {{ choice.is_correct.label(class='form-check-label') }}
            </div>
            {% endfor %}
        </div>
        {% endfor %}
    </div>
    <button type="submit" class="btn btn-primary">Add Quiz</button>
</form>
{% endblock %}